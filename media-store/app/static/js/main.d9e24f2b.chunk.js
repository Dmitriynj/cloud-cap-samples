(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{138:function(e,t,n){e.exports=n(227)},143:function(e,t,n){},145:function(e,t,n){},186:function(e,t,n){},227:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),o=n.n(c),s=(n(143),n(144),n(145),n(230)),l=n(23),u=n(71),i=n(235),m=n(58),d=n(81),p=n(53),g=n(93),f=n(233),h=n(232),E=n(45),b=n(68),y=n(79),v=n.n(y),O=n(231),j=function(e){var t=e.name,n=e.composer,a=e.genreName,c=e.unitPrice;e.isOwned,e.isSelected;return r.a.createElement(O.a,{style:{borderRadius:6},title:t,bordered:!1},n&&r.a.createElement("div",null,"Compositor: ",r.a.createElement("span",{style:{fontWeight:600}},n)),r.a.createElement("div",null,"Price: ",r.a.createElement("span",{style:{fontWeight:600}},c)),r.a.createElement("div",null,"Genre: ",r.a.createElement("span",{style:{fontWeight:600}},a)))},k=function(e,t,n){e.response&&(console.log(e.response.status),console.log(e.response),n(t[e.response.status]||"/error"))},I=(n(186),Object(a.createContext)({loading:{},setLoading:function(){}})),S=function(){return Object(a.useContext)(I)},w=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(p.a)(n,2),o=c[0],s=c[1],l=Object(a.useMemo)((function(){return{loading:o,setLoading:function(e){return s(e)}}}),[o]);return r.a.createElement(I.Provider,{value:l},t)},$=f.a.Search,x=h.a.Option,C="http://localhost:4004/browse-tracks",P={401:"/unauthorized",403:"/forbidden",500:"/internal-error"},z={leading:!0,trailing:!1},T={headers:{Authorization:"Basic dXNlcjA6"}},W=function(){var e=Object(l.f)(),t=Object(a.useState)({currentPage:1,pages:null,PAGE_LIMIT:20}),n=Object(p.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)([]),u=Object(p.a)(s,2),i=u[0],m=u[1],f=Object(a.useState)(void 0),y=Object(p.a)(f,2),O=y[0],I=y[1],w=Object(a.useState)([]),W=Object(p.a)(w,2),B=W[0],D=W[1],M=S(),N=M.loading,A=M.setLoading,G=Object(a.useState)({isMy:!1,substr:"",genreIds:[],$skip:0,$top:20}),L=Object(p.a)(G,2),R=L[0],_=L[1];Object(a.useEffect)((function(){return A(!0)}),[]),Object(a.useEffect)((function(){!O&&N&&(v.a.get("".concat(C,"/Tracks/$count"),T).then((function(e){return o(Object(d.a)({},c,{pages:e.data}))})).catch((function(t){return k(t,P,e.push)})),v.a.get("".concat(C,"/Tracks?$top=").concat(R.$top),T).then((function(e){return I((function(){return e.data.value}))})).catch((function(t){return k(t,P,e.push)})).then(A(!1)),v.a.get("".concat(C,"/Genres"),T).then((function(e){return D(e.data.value)})).catch((function(t){return k(t,P,e.push)})))}),[N]),Object(a.useEffect)((function(){Object(g.isEmpty)(O)||Object(g.isEmpty)(B)||m(O.map((function(e){var t=e.ID,n=e.name,a=e.composer,c=e.genre_ID,o=e.unitPrice,s=B.find((function(e){return e.ID===c})).name;return console.log("genreName",s),r.a.createElement(E.a,{key:t,className:"gutter-row",span:8},r.a.createElement(j,{name:n,genreName:s,composer:a,unitPrice:o}))})))}),[O,B]);var J=Object(g.debounce)((function(){console.log(R.genreIds);var t=R.genreIds.map((function(e){return"genre_ID eq ".concat(e)})).join(" or "),n=" and ".concat(t),a="contains(name,'".concat(R.substr,"')");v.a.get("".concat(C,"/Tracks"),Object(d.a)({},T,{params:{$top:R.$top,$skip:R.$skip,$filter:a+n},paramsSerializer:function(e){var t="$top=".concat(R.$top,"&$skip=").concat(R.$skip,"&$filter=").concat(a+n);return console.log(t),t}})).then((function(e){return I(e.data.value)})).catch((function(t){return k(t,P,e.push)})).then((function(){return A(!1)}))}),500,z),q=B?B.map((function(e){var t=e.ID,n=e.name;return r.a.createElement(x,{key:t,value:t.toString()},n)})):[];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement($,{style:{padding:10,borderRadius:6,maxWidth:400},placeholder:"Search tracks",size:"large",onSearch:function(){A(!0),J()},onChange:function(e){return _(Object(d.a)({},R,{substr:e.target.value}))}}),r.a.createElement(h.a,{mode:"multiple",allowClear:!0,style:{padding:10,borderRadius:6,minWidth:100},placeholder:"Genres",onChange:function(e){return t=e,void _(Object(d.a)({},R,{genreIds:t.map((function(e){return parseInt(e,10)}))}));var t}},q)),r.a.createElement("div",null,r.a.createElement(b.a,{gutter:[{xs:8,sm:16,md:24,lg:32},24]},i)))},B=n(234),D=n(229),M={"/":"Browse / Tracks","/account":"Account","/manage":"Manage Orders"},N=function(){var e=Object(l.g)(),t=S().loading;return r.a.createElement(B.a,{style:{height:20,margin:"16px  "}},r.a.createElement(B.a.Item,null,M[e.pathname]),r.a.createElement(B.a.Item,null,t&&r.a.createElement(D.a,null)))},A=n(100),G=function(){var e=Object(l.f)();return r.a.createElement(A.a,{theme:"light",mode:"horizontal",defaultSelectedKeys:["2"]},r.a.createElement(A.a.Item,{key:"1",onClick:function(){return e.push("/")}},"Browse"),r.a.createElement(A.a.Item,{key:"2",onClick:function(){return e.push("/person")}},"Profile"),r.a.createElement(A.a.Item,{key:"3",onClick:function(){return e.push("/manage-orders")}},"Manage orders"))},L=s.a.Content,R=function(e){var t=e.status,n=e.message,a=Object(l.f)();return r.a.createElement(i.a,{status:t,title:t,subTitle:n,extra:r.a.createElement(m.a,{onClick:function(){a.push("/")},type:"primary"},"Back Home")})},_=function(){return r.a.createElement(u.a,null,r.a.createElement(G,null),r.a.createElement(L,{className:"site-layout",style:{padding:"0 50px",marginTop:20}},r.a.createElement("div",{style:{padding:"24px"}},r.a.createElement(N,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/"},r.a.createElement(W,null)),r.a.createElement(l.a,{path:"/internal-error"},r.a.createElement(R,{status:500,message:"Sorry, something went wrong."})),r.a.createElement(l.a,{path:"/forbidden"},r.a.createElement(R,{status:403,message:"Sorry, you are not able to get this resourse."})),r.a.createElement(l.a,{path:"/unauthorized"},r.a.createElement(R,{status:"error",message:"401, Sorry, you are not authorized to access this page."})),r.a.createElement(l.a,{path:"/error"},r.a.createElement(R,{status:"error",message:"Sorry, something went wrong"})),r.a.createElement(l.a,null,r.a.createElement(R,{status:404,message:"Sorry, the page you visited does not exist."}))))))},J=function(){return r.a.createElement(s.a,{style:{height:"100%"}},r.a.createElement(w,null,r.a.createElement(_,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[138,1,2]]]);
//# sourceMappingURL=main.d9e24f2b.chunk.js.map